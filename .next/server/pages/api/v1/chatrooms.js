"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/v1/chatrooms";
exports.ids = ["pages/api/v1/chatrooms"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fv1%2Fchatrooms&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cv1%5Cchatrooms.js&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fv1%2Fchatrooms&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cv1%5Cchatrooms.js&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_v1_chatrooms_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\v1\\chatrooms.js */ \"(api)/./pages/api/v1/chatrooms.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_v1_chatrooms_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_v1_chatrooms_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/v1/chatrooms\",\n        pathname: \"/api/v1/chatrooms\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_v1_chatrooms_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnYxJTJGY2hhdHJvb21zJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNhcGklNUN2MSU1Q2NoYXRyb29tcy5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUMyRDtBQUMzRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsdURBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLHVEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL2ZyZWUtYXBpLWNlbnRlci8/YjkxZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXHYxXFxcXGNoYXRyb29tcy5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3YxL2NoYXRyb29tc1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3YxL2NoYXRyb29tc1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fv1%2Fchatrooms&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cv1%5Cchatrooms.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/v1/chatrooms.js":
/*!***********************************!*\
  !*** ./pages/api/v1/chatrooms.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _utils_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utils/response */ \"(api)/./utils/response.js\");\n\n// GitHub API Configuration\nconst GITHUB_TOKEN = process.env.GITHUB_TOKEN; // IMPORTANT: Set this environment variable securely\nconst GITHUB_OWNER = \"COURTESYCOIL\"; // Your GitHub username\nconst GITHUB_REPO = \"free-api-center.org\"; // Your repository name\nconst CHATROOMS_DIR = \"Chatrooms\"; // Folder where chatroom files are stored\nconst GITHUB_API_BASE_URL = \"https://api.github.com\";\n// Helper function to make authenticated GitHub API requests\nasync function githubApiRequest(url, method = \"GET\", data = null) {\n    if (!GITHUB_TOKEN) {\n        throw new Error(\"GitHub Token not configured.\");\n    }\n    const headers = {\n        \"Authorization\": `token ${GITHUB_TOKEN}`,\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"application/vnd.github.v3+json\"\n    };\n    const options = {\n        method,\n        headers\n    };\n    if (data) {\n        options.body = JSON.stringify(data);\n    }\n    const response = await fetch(url, options);\n    if (!response.ok) {\n        const errorBody = await response.json();\n        throw new Error(`GitHub API Error: ${response.status} ${response.statusText} - ${errorBody.message}`);\n    }\n    return response.json();\n}\n// Helper to get file content from GitHub\nasync function getGitHubFile(filePath) {\n    const url = `${GITHUB_API_BASE_URL}/repos/${GITHUB_OWNER}/${GITHUB_REPO}/contents/${filePath}`;\n    try {\n        const data = await githubApiRequest(url);\n        // Content is Base64 encoded\n        const content = Buffer.from(data.content, \"base64\").toString(\"utf8\");\n        return {\n            content: JSON.parse(content),\n            sha: data.sha\n        };\n    } catch (error) {\n        if (error.message.includes(\"Not Found\")) {\n            return null; // File not found\n        }\n        throw error;\n    }\n}\n// Helper to create a file on GitHub\nasync function createGitHubFile(filePath, content, message) {\n    const url = `${GITHUB_API_BASE_URL}/repos/${GITHUB_OWNER}/${GITHUB_REPO}/contents/${filePath}`;\n    const encodedContent = Buffer.from(JSON.stringify(content, null, 2)).toString(\"base64\");\n    return githubApiRequest(url, \"PUT\", {\n        message,\n        content: encodedContent\n    });\n}\n// Helper to update a file on GitHub\nasync function updateGitHubFile(filePath, content, message, sha) {\n    const url = `${GITHUB_API_BASE_URL}/repos/${GITHUB_OWNER}/${GITHUB_REPO}/contents/${filePath}`;\n    const encodedContent = Buffer.from(JSON.stringify(content, null, 2)).toString(\"base64\");\n    return githubApiRequest(url, \"PUT\", {\n        message,\n        content: encodedContent,\n        sha\n    });\n}\n// Helper to get directory contents from GitHub\nasync function getGitHubDirectoryContents(path) {\n    const url = `${GITHUB_API_BASE_URL}/repos/${GITHUB_OWNER}/${GITHUB_REPO}/contents/${path}`;\n    return githubApiRequest(url);\n}\nasync function handler(req, res) {\n    // Existing in-memory chatrooms array is no longer needed\n    // const chatrooms = [];\n    if (req.method === \"POST\") {\n        const { name } = req.body;\n        if (!name || typeof name !== \"string\" || name.trim() === \"\") {\n            return (0,_utils_response__WEBPACK_IMPORTED_MODULE_0__.sendResponse)(res, {\n                message: \"Chatroom name is required.\"\n            }, 400);\n        }\n        const newChatroom = {\n            id: `chat-${Date.now()}-${Math.floor(Math.random() * 1000)}`,\n            name: name.trim(),\n            messages: [],\n            users: []\n        };\n        const filePath = `${CHATROOMS_DIR}/${newChatroom.id}.json`;\n        try {\n            // Create chatroom JSON data file (separate from UI folder)\n            await createGitHubFile(filePath, newChatroom, `Create chatroom ${newChatroom.id}`);\n            return (0,_utils_response__WEBPACK_IMPORTED_MODULE_0__.sendResponse)(res, {\n                message: \"Chatroom created successfully!\",\n                data: newChatroom\n            }, 201);\n        } catch (error) {\n            console.error(\"Error creating chatroom on GitHub:\", error);\n            return (0,_utils_response__WEBPACK_IMPORTED_MODULE_0__.sendResponse)(res, {\n                message: \"Failed to create chatroom.\"\n            }, 500);\n        }\n    } else if (req.method === \"GET\") {\n        const pathSegments = req.url.split(\"/\").filter(Boolean);\n        let chatroomIdFromPath = null;\n        let isMessagesRequest = false;\n        if (pathSegments.length >= 4 && pathSegments[2] === \"chatrooms\") {\n            chatroomIdFromPath = pathSegments[3];\n            if (pathSegments.length >= 5 && pathSegments[4] === \"messages\") {\n                isMessagesRequest = true;\n            }\n        }\n        const id = chatroomIdFromPath; // Prioritize path ID\n        if (id) {\n            const filePath = `${CHATROOMS_DIR}/${id}.json`;\n            try {\n                const chatroomData = await getGitHubFile(filePath);\n                if (!chatroomData) {\n                    return (0,_utils_response__WEBPACK_IMPORTED_MODULE_0__.sendResponse)(res, {\n                        message: \"Chatroom not found.\"\n                    }, 404);\n                }\n                const chatroom = chatroomData.content;\n                if (isMessagesRequest) {\n                    return (0,_utils_response__WEBPACK_IMPORTED_MODULE_0__.sendResponse)(res, {\n                        data: chatroom.messages\n                    });\n                }\n                return (0,_utils_response__WEBPACK_IMPORTED_MODULE_0__.sendResponse)(res, {\n                    data: chatroom\n                });\n            } catch (error) {\n                console.error(\"Error fetching chatroom from GitHub:\", error);\n                return (0,_utils_response__WEBPACK_IMPORTED_MODULE_0__.sendResponse)(res, {\n                    message: \"Failed to fetch chatroom.\"\n                }, 500);\n            }\n        } else {\n            // Get all chatrooms\n            try {\n                const contents = await getGitHubDirectoryContents(CHATROOMS_DIR);\n                const chatroomFiles = contents.filter((item)=>item.type === \"file\" && item.name.endsWith(\".json\"));\n                const allChatrooms = await Promise.all(chatroomFiles.map(async (file)=>{\n                    const fileContent = await getGitHubFile(file.path);\n                    return fileContent ? fileContent.content : null;\n                }));\n                const validChatrooms = allChatrooms.filter(Boolean);\n                return (0,_utils_response__WEBPACK_IMPORTED_MODULE_0__.sendResponse)(res, {\n                    data: validChatrooms\n                });\n            } catch (error) {\n                console.error(\"Error listing chatrooms from GitHub:\", error);\n                return (0,_utils_response__WEBPACK_IMPORTED_MODULE_0__.sendResponse)(res, {\n                    message: \"Failed to list chatrooms.\"\n                }, 500);\n            }\n        }\n    } else if (req.method === \"POST\") {\n        const pathSegments = req.url.split(\"/\").filter(Boolean);\n        let chatroomIdFromPath = null;\n        let isMessagesPost = false;\n        if (pathSegments.length >= 4 && pathSegments[2] === \"chatrooms\") {\n            chatroomIdFromPath = pathSegments[3];\n            if (pathSegments.length >= 5 && pathSegments[4] === \"messages\") {\n                isMessagesPost = true;\n            }\n        }\n        const id = req.query.id || chatroomIdFromPath;\n        if (id && isMessagesPost) {\n            const filePath = `${CHATROOMS_DIR}/${id}.json`;\n            try {\n                const chatroomData = await getGitHubFile(filePath);\n                if (!chatroomData) {\n                    return (0,_utils_response__WEBPACK_IMPORTED_MODULE_0__.sendResponse)(res, {\n                        message: \"Chatroom not found.\"\n                    }, 404);\n                }\n                const chatroom = chatroomData.content;\n                const sha = chatroomData.sha;\n                const { username, message } = req.body;\n                if (!username || !message || typeof username !== \"string\" || typeof message !== \"string\" || username.trim() === \"\" || message.trim() === \"\") {\n                    return (0,_utils_response__WEBPACK_IMPORTED_MODULE_0__.sendResponse)(res, {\n                        message: \"Username and message are required.\"\n                    }, 400);\n                }\n                const newMessage = {\n                    username: username.trim(),\n                    message: message.trim(),\n                    timestamp: new Date().toISOString()\n                };\n                chatroom.messages.push(newMessage);\n                await updateGitHubFile(filePath, chatroom, `Add message to chatroom ${id}`, sha);\n                return (0,_utils_response__WEBPACK_IMPORTED_MODULE_0__.sendResponse)(res, {\n                    message: \"Message sent successfully!\",\n                    data: newMessage\n                }, 201);\n            } catch (error) {\n                console.error(\"Error sending message to GitHub:\", error);\n                return (0,_utils_response__WEBPACK_IMPORTED_MODULE_0__.sendResponse)(res, {\n                    message: \"Failed to send message.\"\n                }, 500);\n            }\n        }\n        return (0,_utils_response__WEBPACK_IMPORTED_MODULE_0__.sendResponse)(res, {\n            message: \"Method Not Allowed for this endpoint.\"\n        }, 405);\n    } else {\n        return (0,_utils_response__WEBPACK_IMPORTED_MODULE_0__.sendResponse)(res, {\n            message: \"Method Not Allowed\"\n        }, 405);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LG9DQUFvQ0E7Z0JBQ2xELE9BQU9sQyw2REFBWUEsQ0FBQzJDLEtBQUs7b0JBQUVsQixTQUFTO2dCQUEwQixHQUFHO1lBQ25FO1FBQ0Y7UUFDQSxPQUFPekIsNkRBQVlBLENBQUMyQyxLQUFLO1lBQUVsQixTQUFTO1FBQXdDLEdBQUc7SUFDakYsT0FBTztRQUNMLE9BQU96Qiw2REFBWUEsQ0FBQzJDLEtBQUs7WUFBRWxCLFNBQVM7UUFBcUIsR0FBRztJQUM5RDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJlZS1hcGktY2VudGVyLy4vcGFnZXMvYXBpL3YxL2NoYXRyb29tcy5qcz82NmI0Il0sInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IHsgc2VuZFJlc3BvbnNlIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvcmVzcG9uc2UnO1xuXG4vLyBHaXRIdWIgQVBJIENvbmZpZ3VyYXRpb25cbmNvbnN0IEdJVEhVQl9UT0tFTiA9IHByb2Nlc3MuZW52LkdJVEhVQl9UT0tFTjsgLy8gSU1QT1JUQU5UOiBTZXQgdGhpcyBlbnZpcm9ubWVudCB2YXJpYWJsZSBzZWN1cmVseVxuY29uc3QgR0lUSFVCX09XTkVSID0gJ0NPVVJURVNZQ09JTCc7IC8vIFlvdXIgR2l0SHViIHVzZXJuYW1lXG5jb25zdCBHSVRIVUJfUkVQTyA9ICdmcmVlLWFwaS1jZW50ZXIub3JnJzsgLy8gWW91ciByZXBvc2l0b3J5IG5hbWVcbmNvbnN0IENIQVRST09NU19ESVIgPSAnQ2hhdHJvb21zJzsgLy8gRm9sZGVyIHdoZXJlIGNoYXRyb29tIGZpbGVzIGFyZSBzdG9yZWRcbmNvbnN0IEdJVEhVQl9BUElfQkFTRV9VUkwgPSAnaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbSc7XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBtYWtlIGF1dGhlbnRpY2F0ZWQgR2l0SHViIEFQSSByZXF1ZXN0c1xuYXN5bmMgZnVuY3Rpb24gZ2l0aHViQXBpUmVxdWVzdCh1cmwsIG1ldGhvZCA9ICdHRVQnLCBkYXRhID0gbnVsbCkge1xuICBpZiAoIUdJVEhVQl9UT0tFTikge1xuICAgIHRocm93IG5ldyBFcnJvcignR2l0SHViIFRva2VuIG5vdCBjb25maWd1cmVkLicpO1xuICB9XG5cbiAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAnQXV0aG9yaXphdGlvbic6IGB0b2tlbiAke0dJVEhVQl9UT0tFTn1gLFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi92bmQuZ2l0aHViLnYzK2pzb24nLFxuICB9O1xuXG4gIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgbWV0aG9kLFxuICAgIGhlYWRlcnMsXG4gIH07XG5cbiAgaWYgKGRhdGEpIHtcbiAgICBvcHRpb25zLmJvZHkgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgfVxuXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCBvcHRpb25zKTtcbiAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgIGNvbnN0IGVycm9yQm9keSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEdpdEh1YiBBUEkgRXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9IC0gJHtlcnJvckJvZHkubWVzc2FnZX1gKTtcbiAgfVxuICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xufVxuXG4vLyBIZWxwZXIgdG8gZ2V0IGZpbGUgY29udGVudCBmcm9tIEdpdEh1YlxuYXN5bmMgZnVuY3Rpb24gZ2V0R2l0SHViRmlsZShmaWxlUGF0aCkge1xuICBjb25zdCB1cmwgPSBgJHtHSVRIVUJfQVBJX0JBU0VfVVJMfS9yZXBvcy8ke0dJVEhVQl9PV05FUn0vJHtHSVRIVUJfUkVQT30vY29udGVudHMvJHtmaWxlUGF0aH1gO1xuICB0cnkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnaXRodWJBcGlSZXF1ZXN0KHVybCk7XG4gICAgLy8gQ29udGVudCBpcyBCYXNlNjQgZW5jb2RlZFxuICAgIGNvbnN0IGNvbnRlbnQgPSBCdWZmZXIuZnJvbShkYXRhLmNvbnRlbnQsICdiYXNlNjQnKS50b1N0cmluZygndXRmOCcpO1xuICAgIHJldHVybiB7IGNvbnRlbnQ6IEpTT04ucGFyc2UoY29udGVudCksIHNoYTogZGF0YS5zaGEgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnTm90IEZvdW5kJykpIHtcbiAgICAgIHJldHVybiBudWxsOyAvLyBGaWxlIG5vdCBmb3VuZFxuICAgIH1cbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vLyBIZWxwZXIgdG8gY3JlYXRlIGEgZmlsZSBvbiBHaXRIdWJcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUdpdEh1YkZpbGUoZmlsZVBhdGgsIGNvbnRlbnQsIG1lc3NhZ2UpIHtcbiAgY29uc3QgdXJsID0gYCR7R0lUSFVCX0FQSV9CQVNFX1VSTH0vcmVwb3MvJHtHSVRIVUJfT1dORVJ9LyR7R0lUSFVCX1JFUE99L2NvbnRlbnRzLyR7ZmlsZVBhdGh9YDtcbiAgY29uc3QgZW5jb2RlZENvbnRlbnQgPSBCdWZmZXIuZnJvbShKU09OLnN0cmluZ2lmeShjb250ZW50LCBudWxsLCAyKSkudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICByZXR1cm4gZ2l0aHViQXBpUmVxdWVzdCh1cmwsICdQVVQnLCB7XG4gICAgbWVzc2FnZSxcbiAgICBjb250ZW50OiBlbmNvZGVkQ29udGVudCxcbiAgfSk7XG59XG5cbi8vIEhlbHBlciB0byB1cGRhdGUgYSBmaWxlIG9uIEdpdEh1YlxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlR2l0SHViRmlsZShmaWxlUGF0aCwgY29udGVudCwgbWVzc2FnZSwgc2hhKSB7XG4gIGNvbnN0IHVybCA9IGAke0dJVEhVQl9BUElfQkFTRV9VUkx9L3JlcG9zLyR7R0lUSFVCX09XTkVSfS8ke0dJVEhVQl9SRVBPfS9jb250ZW50cy8ke2ZpbGVQYXRofWA7XG4gIGNvbnN0IGVuY29kZWRDb250ZW50ID0gQnVmZmVyLmZyb20oSlNPTi5zdHJpbmdpZnkoY29udGVudCwgbnVsbCwgMikpLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgcmV0dXJuIGdpdGh1YkFwaVJlcXVlc3QodXJsLCAnUFVUJywge1xuICAgIG1lc3NhZ2UsXG4gICAgY29udGVudDogZW5jb2RlZENvbnRlbnQsXG4gICAgc2hhLFxuICB9KTtcbn1cblxuLy8gSGVscGVyIHRvIGdldCBkaXJlY3RvcnkgY29udGVudHMgZnJvbSBHaXRIdWJcbmFzeW5jIGZ1bmN0aW9uIGdldEdpdEh1YkRpcmVjdG9yeUNvbnRlbnRzKHBhdGgpIHtcbiAgY29uc3QgdXJsID0gYCR7R0lUSFVCX0FQSV9CQVNFX1VSTH0vcmVwb3MvJHtHSVRIVUJfT1dORVJ9LyR7R0lUSFVCX1JFUE99L2NvbnRlbnRzLyR7cGF0aH1gO1xuICByZXR1cm4gZ2l0aHViQXBpUmVxdWVzdCh1cmwpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4gIC8vIEV4aXN0aW5nIGluLW1lbW9yeSBjaGF0cm9vbXMgYXJyYXkgaXMgbm8gbG9uZ2VyIG5lZWRlZFxuICAvLyBjb25zdCBjaGF0cm9vbXMgPSBbXTtcblxuICBpZiAocmVxLm1ldGhvZCA9PT0gJ1BPU1QnKSB7XG4gICAgY29uc3QgeyBuYW1lIH0gPSByZXEuYm9keTtcbiAgICBpZiAoIW5hbWUgfHwgdHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnIHx8IG5hbWUudHJpbSgpID09PSAnJykge1xuICAgICAgcmV0dXJuIHNlbmRSZXNwb25zZShyZXMsIHsgbWVzc2FnZTogJ0NoYXRyb29tIG5hbWUgaXMgcmVxdWlyZWQuJyB9LCA0MDApO1xuICAgIH1cblxuICAgIGNvbnN0IG5ld0NoYXRyb29tID0ge1xuICAgICAgaWQ6IGBjaGF0LSR7RGF0ZS5ub3coKX0tJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwKX1gLFxuICAgICAgbmFtZTogbmFtZS50cmltKCksXG4gICAgICBtZXNzYWdlczogW10sXG4gICAgICB1c2VyczogW10sXG4gICAgfTtcblxuICAgIGNvbnN0IGZpbGVQYXRoID0gYCR7Q0hBVFJPT01TX0RJUn0vJHtuZXdDaGF0cm9vbS5pZH0uanNvbmA7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENyZWF0ZSBjaGF0cm9vbSBKU09OIGRhdGEgZmlsZSAoc2VwYXJhdGUgZnJvbSBVSSBmb2xkZXIpXG4gICAgICBhd2FpdCBjcmVhdGVHaXRIdWJGaWxlKGZpbGVQYXRoLCBuZXdDaGF0cm9vbSwgYENyZWF0ZSBjaGF0cm9vbSAke25ld0NoYXRyb29tLmlkfWApO1xuICAgICAgcmV0dXJuIHNlbmRSZXNwb25zZShyZXMsIHsgbWVzc2FnZTogJ0NoYXRyb29tIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5IScsIGRhdGE6IG5ld0NoYXRyb29tIH0sIDIwMSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGNoYXRyb29tIG9uIEdpdEh1YjonLCBlcnJvcik7XG4gICAgICByZXR1cm4gc2VuZFJlc3BvbnNlKHJlcywgeyBtZXNzYWdlOiAnRmFpbGVkIHRvIGNyZWF0ZSBjaGF0cm9vbS4nIH0sIDUwMCk7XG4gICAgfVxuICB9IGVsc2UgaWYgKHJlcS5tZXRob2QgPT09ICdHRVQnKSB7XG5cblxuICAgIGNvbnN0IHBhdGhTZWdtZW50cyA9IHJlcS51cmwuc3BsaXQoJy8nKS5maWx0ZXIoQm9vbGVhbik7XG4gICAgbGV0IGNoYXRyb29tSWRGcm9tUGF0aCA9IG51bGw7XG4gICAgbGV0IGlzTWVzc2FnZXNSZXF1ZXN0ID0gZmFsc2U7XG5cbiAgICBpZiAocGF0aFNlZ21lbnRzLmxlbmd0aCA+PSA0ICYmIHBhdGhTZWdtZW50c1syXSA9PT0gJ2NoYXRyb29tcycpIHtcbiAgICAgIGNoYXRyb29tSWRGcm9tUGF0aCA9IHBhdGhTZWdtZW50c1szXTtcbiAgICAgIGlmIChwYXRoU2VnbWVudHMubGVuZ3RoID49IDUgJiYgcGF0aFNlZ21lbnRzWzRdID09PSAnbWVzc2FnZXMnKSB7XG4gICAgICAgIGlzTWVzc2FnZXNSZXF1ZXN0ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBpZCA9IGNoYXRyb29tSWRGcm9tUGF0aDsgLy8gUHJpb3JpdGl6ZSBwYXRoIElEXG5cbiAgICBpZiAoaWQpIHtcbiAgICAgIGNvbnN0IGZpbGVQYXRoID0gYCR7Q0hBVFJPT01TX0RJUn0vJHtpZH0uanNvbmA7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBjaGF0cm9vbURhdGEgPSBhd2FpdCBnZXRHaXRIdWJGaWxlKGZpbGVQYXRoKTtcbiAgICAgICAgaWYgKCFjaGF0cm9vbURhdGEpIHtcbiAgICAgICAgICByZXR1cm4gc2VuZFJlc3BvbnNlKHJlcywgeyBtZXNzYWdlOiAnQ2hhdHJvb20gbm90IGZvdW5kLicgfSwgNDA0KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjaGF0cm9vbSA9IGNoYXRyb29tRGF0YS5jb250ZW50O1xuXG4gICAgICAgIGlmIChpc01lc3NhZ2VzUmVxdWVzdCkge1xuICAgICAgICAgIHJldHVybiBzZW5kUmVzcG9uc2UocmVzLCB7IGRhdGE6IGNoYXRyb29tLm1lc3NhZ2VzIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZW5kUmVzcG9uc2UocmVzLCB7IGRhdGE6IGNoYXRyb29tIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY2hhdHJvb20gZnJvbSBHaXRIdWI6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gc2VuZFJlc3BvbnNlKHJlcywgeyBtZXNzYWdlOiAnRmFpbGVkIHRvIGZldGNoIGNoYXRyb29tLicgfSwgNTAwKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gR2V0IGFsbCBjaGF0cm9vbXNcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnRzID0gYXdhaXQgZ2V0R2l0SHViRGlyZWN0b3J5Q29udGVudHMoQ0hBVFJPT01TX0RJUik7XG4gICAgICAgIGNvbnN0IGNoYXRyb29tRmlsZXMgPSBjb250ZW50cy5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09ICdmaWxlJyAmJiBpdGVtLm5hbWUuZW5kc1dpdGgoJy5qc29uJykpO1xuICAgICAgICBjb25zdCBhbGxDaGF0cm9vbXMgPSBhd2FpdCBQcm9taXNlLmFsbChjaGF0cm9vbUZpbGVzLm1hcChhc3luYyAoZmlsZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGZpbGVDb250ZW50ID0gYXdhaXQgZ2V0R2l0SHViRmlsZShmaWxlLnBhdGgpO1xuICAgICAgICAgIHJldHVybiBmaWxlQ29udGVudCA/IGZpbGVDb250ZW50LmNvbnRlbnQgOiBudWxsO1xuICAgICAgICB9KSk7XG4gICAgICAgIGNvbnN0IHZhbGlkQ2hhdHJvb21zID0gYWxsQ2hhdHJvb21zLmZpbHRlcihCb29sZWFuKTtcbiAgICAgICAgcmV0dXJuIHNlbmRSZXNwb25zZShyZXMsIHsgZGF0YTogdmFsaWRDaGF0cm9vbXMgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsaXN0aW5nIGNoYXRyb29tcyBmcm9tIEdpdEh1YjonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBzZW5kUmVzcG9uc2UocmVzLCB7IG1lc3NhZ2U6ICdGYWlsZWQgdG8gbGlzdCBjaGF0cm9vbXMuJyB9LCA1MDApO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChyZXEubWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICBjb25zdCBwYXRoU2VnbWVudHMgPSByZXEudXJsLnNwbGl0KCcvJykuZmlsdGVyKEJvb2xlYW4pO1xuICAgIGxldCBjaGF0cm9vbUlkRnJvbVBhdGggPSBudWxsO1xuICAgIGxldCBpc01lc3NhZ2VzUG9zdCA9IGZhbHNlO1xuXG4gICAgaWYgKHBhdGhTZWdtZW50cy5sZW5ndGggPj0gNCAmJiBwYXRoU2VnbWVudHNbMl0gPT09ICdjaGF0cm9vbXMnKSB7XG4gICAgICBjaGF0cm9vbUlkRnJvbVBhdGggPSBwYXRoU2VnbWVudHNbM107XG4gICAgICBpZiAocGF0aFNlZ21lbnRzLmxlbmd0aCA+PSA1ICYmIHBhdGhTZWdtZW50c1s0XSA9PT0gJ21lc3NhZ2VzJykge1xuICAgICAgICBpc01lc3NhZ2VzUG9zdCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgaWQgPSByZXEucXVlcnkuaWQgfHwgY2hhdHJvb21JZEZyb21QYXRoO1xuXG4gICAgaWYgKGlkICYmIGlzTWVzc2FnZXNQb3N0KSB7XG4gICAgICBjb25zdCBmaWxlUGF0aCA9IGAke0NIQVRST09NU19ESVJ9LyR7aWR9Lmpzb25gO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY2hhdHJvb21EYXRhID0gYXdhaXQgZ2V0R2l0SHViRmlsZShmaWxlUGF0aCk7XG4gICAgICAgIGlmICghY2hhdHJvb21EYXRhKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbmRSZXNwb25zZShyZXMsIHsgbWVzc2FnZTogJ0NoYXRyb29tIG5vdCBmb3VuZC4nIH0sIDQwNCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2hhdHJvb20gPSBjaGF0cm9vbURhdGEuY29udGVudDtcbiAgICAgICAgY29uc3Qgc2hhID0gY2hhdHJvb21EYXRhLnNoYTtcblxuICAgICAgICBjb25zdCB7IHVzZXJuYW1lLCBtZXNzYWdlIH0gPSByZXEuYm9keTtcbiAgICAgICAgaWYgKCF1c2VybmFtZSB8fCAhbWVzc2FnZSB8fCB0eXBlb2YgdXNlcm5hbWUgIT09ICdzdHJpbmcnIHx8IHR5cGVvZiBtZXNzYWdlICE9PSAnc3RyaW5nJyB8fCB1c2VybmFtZS50cmltKCkgPT09ICcnIHx8IG1lc3NhZ2UudHJpbSgpID09PSAnJykge1xuICAgICAgICAgIHJldHVybiBzZW5kUmVzcG9uc2UocmVzLCB7IG1lc3NhZ2U6ICdVc2VybmFtZSBhbmQgbWVzc2FnZSBhcmUgcmVxdWlyZWQuJyB9LCA0MDApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbmV3TWVzc2FnZSA9IHtcbiAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUudHJpbSgpLFxuICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UudHJpbSgpLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH07XG4gICAgICAgIGNoYXRyb29tLm1lc3NhZ2VzLnB1c2gobmV3TWVzc2FnZSk7XG5cbiAgICAgICAgYXdhaXQgdXBkYXRlR2l0SHViRmlsZShmaWxlUGF0aCwgY2hhdHJvb20sIGBBZGQgbWVzc2FnZSB0byBjaGF0cm9vbSAke2lkfWAsIHNoYSk7XG4gICAgICAgIHJldHVybiBzZW5kUmVzcG9uc2UocmVzLCB7IG1lc3NhZ2U6ICdNZXNzYWdlIHNlbnQgc3VjY2Vzc2Z1bGx5IScsIGRhdGE6IG5ld01lc3NhZ2UgfSwgMjAxKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlbmRpbmcgbWVzc2FnZSB0byBHaXRIdWI6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gc2VuZFJlc3BvbnNlKHJlcywgeyBtZXNzYWdlOiAnRmFpbGVkIHRvIHNlbmQgbWVzc2FnZS4nIH0sIDUwMCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzZW5kUmVzcG9uc2UocmVzLCB7IG1lc3NhZ2U6ICdNZXRob2QgTm90IEFsbG93ZWQgZm9yIHRoaXMgZW5kcG9pbnQuJyB9LCA0MDUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBzZW5kUmVzcG9uc2UocmVzLCB7IG1lc3NhZ2U6ICdNZXRob2QgTm90IEFsbG93ZWQnIH0sIDQwNSk7XG4gIH1cbn0iXSwibmFtZXMiOlsic2VuZFJlc3BvbnNlIiwiR0lUSFVCX1RPS0VOIiwicHJvY2VzcyIsImVudiIsIkdJVEhVQl9PV05FUiIsIkdJVEhVQl9SRVBPIiwiQ0hBVFJPT01TX0RJUiIsIkdJVEhVQl9BUElfQkFTRV9VUkwiLCJnaXRodWJBcGlSZXF1ZXN0IiwidXJsIiwibWV0aG9kIiwiZGF0YSIsIkVycm9yIiwiaGVhZGVycyIsIm9wdGlvbnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInJlc3BvbnNlIiwiZmV0Y2giLCJvayIsImVycm9yQm9keSIsImpzb24iLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwibWVzc2FnZSIsImdldEdpdEh1YkZpbGUiLCJmaWxlUGF0aCIsImNvbnRlbnQiLCJCdWZmZXIiLCJmcm9tIiwidG9TdHJpbmciLCJwYXJzZSIsInNoYSIsImVycm9yIiwiaW5jbHVkZXMiLCJjcmVhdGVHaXRIdWJGaWxlIiwiZW5jb2RlZENvbnRlbnQiLCJ1cGRhdGVHaXRIdWJGaWxlIiwiZ2V0R2l0SHViRGlyZWN0b3J5Q29udGVudHMiLCJwYXRoIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm5hbWUiLCJ0cmltIiwibmV3Q2hhdHJvb20iLCJpZCIsIkRhdGUiLCJub3ciLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJtZXNzYWdlcyIsInVzZXJzIiwiY29uc29sZSIsInBhdGhTZWdtZW50cyIsInNwbGl0IiwiZmlsdGVyIiwiQm9vbGVhbiIsImNoYXRyb29tSWRGcm9tUGF0aCIsImlzTWVzc2FnZXNSZXF1ZXN0IiwibGVuZ3RoIiwiY2hhdHJvb21EYXRhIiwiY2hhdHJvb20iLCJjb250ZW50cyIsImNoYXRyb29tRmlsZXMiLCJpdGVtIiwidHlwZSIsImVuZHNXaXRoIiwiYWxsQ2hhdHJvb21zIiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsImZpbGUiLCJmaWxlQ29udGVudCIsInZhbGlkQ2hhdHJvb21zIiwiaXNNZXNzYWdlc1Bvc3QiLCJxdWVyeSIsInVzZXJuYW1lIiwibmV3TWVzc2FnZSIsInRpbWVzdGFtcCIsInRvSVNPU3RyaW5nIiwicHVzaCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/v1/chatrooms.js\n");

/***/ }),

/***/ "(api)/./utils/response.js":
/*!***************************!*\
  !*** ./utils/response.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sendResponse: () => (/* binding */ sendResponse)\n/* harmony export */ });\n// This function handles the branding automatically\nconst sendResponse = (res, data, statusCode = 200)=>{\n    res.status(statusCode).json({\n        success: statusCode >= 200 && statusCode < 300,\n        timestamp: new Date().toISOString(),\n        meta: {\n            author: \"Painsel\",\n            project: \"Free APIs Center\",\n            github: \"https://github.com/COURTESYCOIL/free-api-center.org\"\n        },\n        data: data\n    });\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi91dGlscy9yZXNwb25zZS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsbURBQW1EO0FBQzVDLE1BQU1BLGVBQWUsQ0FBQ0MsS0FBS0MsTUFBTUMsYUFBYSxHQUFHO0lBQ3RERixJQUFJRyxNQUFNLENBQUNELFlBQVlFLElBQUksQ0FBQztRQUMxQkMsU0FBU0gsY0FBYyxPQUFPQSxhQUFhO1FBQzNDSSxXQUFXLElBQUlDLE9BQU9DLFdBQVc7UUFDakNDLE1BQU07WUFDSkMsUUFBUTtZQUNSQyxTQUFTO1lBQ1RDLFFBQVE7UUFDVjtRQUNBWCxNQUFNQTtJQUNSO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL2ZyZWUtYXBpLWNlbnRlci8uL3V0aWxzL3Jlc3BvbnNlLmpzPzBhMGUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhpcyBmdW5jdGlvbiBoYW5kbGVzIHRoZSBicmFuZGluZyBhdXRvbWF0aWNhbGx5XHJcbmV4cG9ydCBjb25zdCBzZW5kUmVzcG9uc2UgPSAocmVzLCBkYXRhLCBzdGF0dXNDb2RlID0gMjAwKSA9PiB7XHJcbiAgcmVzLnN0YXR1cyhzdGF0dXNDb2RlKS5qc29uKHtcclxuICAgIHN1Y2Nlc3M6IHN0YXR1c0NvZGUgPj0gMjAwICYmIHN0YXR1c0NvZGUgPCAzMDAsXHJcbiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgIG1ldGE6IHtcclxuICAgICAgYXV0aG9yOiBcIlBhaW5zZWxcIixcclxuICAgICAgcHJvamVjdDogXCJGcmVlIEFQSXMgQ2VudGVyXCIsXHJcbiAgICAgIGdpdGh1YjogXCJodHRwczovL2dpdGh1Yi5jb20vQ09VUlRFU1lDT0lML2ZyZWUtYXBpLWNlbnRlci5vcmdcIlxyXG4gICAgfSxcclxuICAgIGRhdGE6IGRhdGFcclxuICB9KTtcclxufTtcclxuIl0sIm5hbWVzIjpbInNlbmRSZXNwb25zZSIsInJlcyIsImRhdGEiLCJzdGF0dXNDb2RlIiwic3RhdHVzIiwianNvbiIsInN1Y2Nlc3MiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJtZXRhIiwiYXV0aG9yIiwicHJvamVjdCIsImdpdGh1YiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./utils/response.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fv1%2Fchatrooms&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cv1%5Cchatrooms.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();